<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: vim | @_ddrscott_]]></title>
  <link href="http://ddrscott.github.io/blog/categories/vim/atom.xml" rel="self"/>
  <link href="http://ddrscott.github.io/"/>
  <updated>2016-04-14T05:41:34-05:00</updated>
  <id>http://ddrscott.github.io/</id>
  <author>
    <name><![CDATA[Scott Pierce]]></name>
    <email><![CDATA[ddrscott@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[BS to the Black Hole]]></title>
    <link href="http://ddrscott.github.io/blog/2016/bs-to-the-black-hole/"/>
    <updated>2016-04-13T00:48:47-05:00</updated>
    <id>http://ddrscott.github.io/blog/2016/bs-to-the-black-hole</id>
    <content type="html"><![CDATA[<p><img class="featured" src="/images/blackhole_bs.png" width="800" height="469" title="&lsquo;BS to Black Hole&rsquo;" ></p>

<p>First post in 2 years. Sorry to keep you waiting.</p>

<p>I&rsquo;ve been playing with Vim again, more specifically NeoVim
<a href="https://neovim.io/,">https://neovim.io/,</a> and this time I think it&rsquo;s going to stick.</p>

<h2>The Problem</h2>

<p>Sometimes, I want to delete text without worrying about blowing away the <code>unnamed</code>
register. This can be done by prefixing a normal or visual delete with <code>"_</code>,
but that&rsquo;s an awkward dance for my pinky and ring finger. Go ahead, try it.
You&rsquo;ll feel like you&rsquo;re in junior high again.</p>

<!-- more -->


<h2>Solution #1</h2>

<p>Setup a single key to do that <code>"_</code> thing for me. So my naive approach was to add
the following:</p>

<p><code>vim
nnoremap &lt;BS&gt; "_
vnoremap &lt;BS&gt; "_
</code></p>

<p>This was fine for 32.1 seconds of usability testing. It did the job, but what
cames after a <code>"_</code> was usually a <code>dw</code> or <code>db</code> operator. Ah oh, I said the &ldquo;o&rdquo;
word. That means I have to make a <code>opfunc</code>. (Who makes these rules?!?)</p>

<h2>Solution #2</h2>

<p>So what is this operator going to let us do? How about <code>&lt;BS&gt;iw</code> or <code>&lt;BS&gt;ap</code> or
<code>v{motion around something you hate}&lt;BS&gt;</code>? If any of those seem awesome, here&rsquo;s
how to get in on the hot action!</p>

<p>```vim
&ldquo; Add to your .vimrc or init.vim or vim.after or :e $MYVIMRC
func! BlackHoleDeleteOperator(type)
  if a:type ==# &lsquo;char&rsquo;</p>

<pre><code>execute 'normal! `[v`]"_d'
</code></pre>

<p>  elseif a:type ==# &lsquo;line&rsquo;</p>

<pre><code>execute 'normal! `[V`]"_d'
</code></pre>

<p>  else</p>

<pre><code>execute 'normal! `&lt;' . a:type . '`&gt;"_d'
</code></pre>

<p>  endif
endf</p>

<p>&ldquo; Map to <BS> because it&rsquo;s under worked in Vim.
nnoremap <silent> <BS> <Esc>:set opfunc=BlackHoleDeleteOperator<CR>g@
vnoremap <silent> <BS> :&lt;C-u>call BlackHoleDeleteOperator(visualmode())<CR>
```</p>

<h2>How Does it Work?</h2>

<ul>
<li><p><code>opfunc</code> is best explained in Vim help. Use <code>:help opfunc</code> and follow the <code>&lt;C-]&gt;</code>
 until clarity is achieved.</p></li>
<li><p><code>:help normal</code> &ndash; evaluates the following characters as if they were typed.</p></li>
<li><p><code>:help marks</code> &ndash; page down a bit to get the list of automatic marks based on
 last positions of various changes, jumps, and actions.</p></li>
<li><p><a href="http://learnvimscriptthehardway.stevelosh.com/chapters/33.html">http://learnvimscriptthehardway.stevelosh.com/chapters/33.html</a> &ndash; seriously,
 this guy does a lot better explaining than me. Learn it the hard way, first,
 ask questions later.</p></li>
</ul>


<h2>Closing</h2>

<p>Thanks for getting this far. Do you have a better mapping for <code>&lt;BS&gt;</code>? Do you
have a more creative solution than typing <code>"_</code> to access the black hole
register? Let me know by commenting or share this post to some one who does.</p>
]]></content>
  </entry>
  
</feed>